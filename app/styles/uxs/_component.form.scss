.uxs-form {
  display       : flex;
  flex-direction: column;
  position      : relative;

  // Form Controls
  &__control {
    position     : relative;
    margin-bottom: rs(2);
    // min height should accomodate for forms with no help text
    // no jumping content when they receive an error message
    min-height   : rs(10);
    max-width    : 100%;
    min-width    : 100%;
    width        : 100%;
    @include mq(tablet) {
      max-width: rs(48);
      min-width: rs(32);
    }
  }

  // Form Labels
  &__label {
    $element      : '.uxs-form__label';
    pointer-events: none;
    z-index       : 1;

    &--filled {
      @include transition-all;
      @include body-1;
      color      : $c-grey;
      line-height: rs(6);
      padding    : 0 rs(1.5);
      position   : absolute;
      top        : rs(.5);
      left       : 0;

      &.active,
      &.checkbox,
      &.focus,
      &.radio {
        @include caption;
        color      : $c-accent;
        line-height: rs(2);
      }

      &.inactive {}

      &.checkbox,
      &.radio {
        position     : relative;
        left         : auto;
        margin-bottom: rs(1);
        padding      : 0;
        top          : auto;
      }

      &#{$element}--invalid {
        color: $c-error;
      }
    }

    &--outlined {
      @include transition-all;
      @include body-1;
      color      : $c-grey;
      left       : rs(1);
      line-height: rs(6);
      padding    : 0 rs(0.75);
      position   : absolute;
      top        : rs(.5);

      &.active,
      &.checkbox,
      &.focus,
      &.radio {
        @include caption;
        background-color: $c-white;
        color           : $c-accent;
        line-height     : rs(2);
        top             : rs(-0.75);
      }

      &.checkbox,
      &.radio {
        position     : relative;
        left         : auto;
        margin-bottom: rs(1);
        padding      : 0;
        top          : auto;
      }

      &.inactive {}

      &#{$element}--invalid {
        color: $c-error;
      }
    }

  }

  // Input Container
  &__datepicker-container,
  &__input-container {
    $element      : '.uxs-form__input-container';
    border        : none;
    border-radius : 0;
    display       : flex;
    flex-direction: row;
    min-height    : rs(7);
    width         : 100%;

    &--filled {
      background-color       : $c-light;
      border-bottom          : rem-size(2px) solid $c-accent;
      border-top-left-radius : rs(.5);
      border-top-right-radius: rs(.5);

      &#{$element}--invalid {
        border-bottom-color: $c-error;
      }
    }

    &--outlined {
      background-color: $c-white;
      border          : rem-size(1px) solid $c-mid;
      border-radius   : rs(.5);

      &.focus {
        border-color: $c-accent;
        box-shadow  : inset 0 0 0 rem-size(1px) $c-accent;
      }

      &#{$element}--invalid {
        border-color: $c-error;
        box-shadow  : inset 0 0 0 rem-size(1spx) $c-error;
      }
    }
  }

  &__datepicker-container {
    @include body-1;

    &--filled {
      line-height: rs(4.25);
      padding    : rs(2.5) rs(1.5) 0;
    }

    &--outlined {
      line-height: rs(6.75);
      padding    : 0 rs(1.75);
    }
  }

  &__dropdown-container {
    display       : flex;
    flex-direction: row;
    min-height    : rs(7);
    min-width     : rs(32);
    @include mq(tablet) {
      max-width: rs(48);
    }

    > div {
      // not sure why we have a blank ember-view
      // on multi selects right now. This fixes
      // the flex break
      display  : flex;
      flex     : 1 1 auto;
      max-width: 100%;
      min-width: 100%;
    }
  }

  &__selection-container {
    align-items   : center;
    display       : flex;
    flex-direction: row;
    margin        : rs(2) 0;
    min-height    : rs(3);
    min-width     : rs(32);
    position      : relative;
    @include mq(tablet) {
      max-width: rs(48);
    }

    &:first-child {
      margin-top: rs(3);
    }
  }

  &__checkbox,
  &__radio {
    outline  : 0;
    // visibility: hidden;
    display  : block;
    font-size: inherit;
    height   : rs(2.5);
    margin   : rem-size(2px) rs(2.5) rem-size(2px) 0;
    width    : rs(2.5);
  }

  &__selection-label {
    @include body-1;
    cursor        : pointer;
    display       : flex;
    flex-direction: row;
    line-height   : rs(3);
    user-select   : none;
  }

  // Form Inputs
  &__input,
  &__textarea {
    @include transition-all();
    @include body-1;
    background-color: transparent;
    border          : none;
    display         : block;
    flex            : 1 1 auto;
    max-width       : none;

    &--filled {
      line-height: rs(4.25);
      padding    : rs(2.5) rs(1.5) 0;
    }

    &--outlined {
      line-height: rs(6.75);
      padding    : 0 rs(1.75);
    }

    &--has-prefix {
      padding-left: 0;
    }

    &--has-suffix {
      padding-right: 0;
    }

    // Alignment
    @include align-modifiers;
  }

  &__input {}

  &__textarea {
    &--filled {
      line-height   : rs(3);
      // padding-top   : rs(3.125);
      margin-top    : rs(2.5);
      padding-top   : rs(0.625);
      padding-bottom: rs(0.625);
    }

    &--outlined {
      line-height   : rs(3);
      padding-top   : rs(2);
      padding-bottom: rs(1.75);
    }
  }

  // Input Prefix/Suffix Text
  &__prefix-text,
  &__suffix-text {
    @include body-1;
    @include transition-all;
    color: $c-mid;

    &--filled {
      opacity    : 0;
      padding    : rs(2.5) rs(1.5) 0;
      line-height: rs(4.25);

      &.active,
      &.focus {
        opacity: 1;
      }
    }

    &--outlined {
      opacity    : 0;
      padding    : 0 rs(1.75);
      line-height: rs(6.75);

      &.active,
      &.focus {
        opacity: 1;
      }
    }
  }

  &__prefix-text {
    &--filled {
      padding-right: rs(0.5);
    }

    &--outlined {
      padding-right: rs(0.5);
    }
  }

  &__suffix-text {
    &--filled {
      padding-left: rs(0.5);
    }

    &--outlined {
      padding-left: rs(0.5);
    }
  }

  // Input Prefix/Suffix
  &__date-icon,
  &__prefix-icon,
  &__suffix-icon {
    align-items    : center;
    display        : flex;
    justify-content: center;
    height         : rs(6.75);
    width          : rs(6);
  }

  &__date-icon {
    position      : absolute;
    top           : 1px;
    right         : 0;
    // let our clicks passthough
    // to the element below
    pointer-events: none;
  }

  // Form Tips & Errors
  &__error,
  &__tip {
    @include align-modifiers;
    @include body-2;
    @include caption;
    color      : $c-grey;
    line-height: rs(2);
    max-width  : none;
    @include mq(tablet) {
      max-width: rs(48);
    }

    &--filled {
      padding: rs(0.5) rs(1.5);
    }

    &--outlined {
      padding: rs(0.5) rs(1.75);
    }

  }
  // A tip folling a checkbox or radio control has
  // no horizontal padding
  .uxs-form__selection-container + .uxs-form__error,
  .uxs-form__selection-container + .uxs-form__tip {
    padding-left : 0;
    padding-right: 0;
  }

  &__tip {
    &--invalid {
      display: none;
    }
  }

  &__error {
    color  : $c-error;
    display: none;

    &--invalid {
      display: block;
    }
  }
}

// Power Select Trigger Component
.ember-power-select-trigger {

  @include body-1;
  align-items    : center;
  background     : transparent;
  display        : flex;
  flex           : 1 1 auto;
  justify-content: flex-end;
  max-width      : 100%;
  overflow       : hidden;
  position       : relative;

  &:focus {
    outline: none;
  }

  &--filled {
    background-color       : $c-light;
    border-bottom          : rem-size(2px) solid $c-accent;
    border-top-left-radius : rs(.5);
    border-top-right-radius: rs(.5);
    line-height            : rs(4.5, 2);
    padding                : rs(3,2) 0 0;
  }

  &--outlined {
    background-color: $c-white;
    border          : rem-size(1px) solid $c-mid;
    border-radius   : rs(.5);
    // height          : rs(7);
    line-height     : rs(7);
    padding         : 0;

    &.ember-basic-dropdown-trigger--below {
      border-bottom-left-radius : 0;
      border-bottom-right-radius: 0;
    }

    &.ember-basic-dropdown-trigger--above {
      border-top-left-radius : 0;
      border-top-right-radius: 0;
    }
  }

  // Multiple Option Wrapper
  .ember-power-select-multiple-options {
    display       : flex;
    flex          : 1 1 auto;
    flex-direction: row;
    flex-wrap     : wrap;
    list-style    : none;
    margin        : 0;
    // max-width     : 100%;
    overflow      : auto;
  }

  &--filled {
    .ember-power-select-multiple-options {
      padding-left : rs(1.75);
      padding-right: rs(1.25);
    }
  }

  &--outlined {
    .ember-power-select-multiple-options {
      padding: rs(1.5) rs(1) rs(1.25) rs(1.5);
    }
  }

  // Multiple Option Wrapper
  .ember-power-select-multiple-option {
    @include text-truncate;
    background-color: rgba($c-accent,1);
    border-radius   : rs(0.5);
    color           : $c-white;
    display         : flex;
    flex-direction  : row;
    padding-right   : rs(1.75);
    margin          : 0 rs(0.5) rs(0.5) 0;
    z-index         : 1;
  }

  &--filled {
    .ember-power-select-multiple-option {
      line-height: rs(3.5);
    }
  }

  &--outlined {
    .ember-power-select-multiple-option {
      line-height: rs(3.5);
    }
  }

  // Multiple Option Search Input
  .ember-power-select-trigger-multiple-input {
    background   : transparent;
    line-height  : rs(3.5);
    flex         : 1 1 auto;
    margin-bottom: rs(0.5);
    padding      : 0;
  }

  // Selected Option
  .ember-power-select-placeholder,
  .ember-power-select-selected-item {
    @include text-truncate;
    display     : block;
    flex        : 1 1 auto;
    order       : 2;
    padding-left: rs(1.75);
  }

  .ember-power-select-placeholder {
    color: $c-grey;
  }
  // Clear Buttons
  .ember-power-select-clear-btn,
  .ember-power-select-multiple-remove-btn {
    display    : block;
    font-size  : rs(2.5);
    flex-shrink: 0;
    text-align : center;
  }
  // Clear Single Option Button
  .ember-power-select-clear-btn {
    color      : $c-grey;
    height     : rs(6.75);
    line-height: rs(6.75);
    padding    : 0 rs(0) 0 rs(1.75, 1);
    width      : rs(4.25,1);
    order      : 1;
  }
  // Clear Multiple Option Button
  .ember-power-select-multiple-remove-btn {
    color : $c-white;
    width : rs(1.75);
    margin: 0 rs(0.5);
  }
  // Dropdown Button
  .ember-power-select-status-icon {
    height    : rs(6.75);
    order     : 3;
    position  : relative;
    width     : rs(6,1);
    align-self: flex-start;

    &::after {
      @include transition-all;
      border-style: solid;
      border-width: rem-size(8px) rem-size(5px) 0;
      border-color: $c-grey transparent transparent;
      bottom      : 0;
      content     : '';
      display     : inline-block;
      height      : 0;
      position    : absolute;
      margin      : auto;
      right       : rs(2.5);
      top         : 0;
      width       : 0;
    }
  }

  &--filled {
    .ember-power-select-clear-btn,
    .ember-power-select-status-icon {
      height     : rs(4.5,2);
      line-height: rs(4.5,2);
    }

    .ember-power-select-status-icon {
      &::after {
        bottom: rs(1.25);
      }
    }
  }
}

// styles when the dropdown is open
.ember-basic-dropdown-trigger--above,
.ember-basic-dropdown-trigger--below {
  .ember-power-select-status-icon {
    &::after {
      transform: rotate(180deg);
    }
  }
}

@at-root .ember-basic-dropdown-content {
  @include body-1;
  @include elevation(6);
  background-color: $c-white;
  border          : rem-size(1px) solid $c-mid;
  position        : absolute;
  width           : auto;
  z-index         : 1000;

  &.ember-basic-dropdown-content--above {
    border-bottom: none;
  }

  &.ember-basic-dropdown-content--below {
    border-top: none;
  }
}

@at-root .ember-power-select-search {
  display       : flex;
  flex-direction: row;
}

@at-root .ember-power-select-search-input {
  background   : rgba($c-light,.5);
  border       : none;
  border-bottom: rem-size(1px) solid $c-mid;
  display      : block;
  height       : rs(7,1);
  line-height  : rs(7,1);
  outline      : none;
  padding      : 0 rs(1.75);
  flex         : 1 1 auto;

  &::placehoder,
  :-moz-placeholder,
  :-ms-input-placeholder,
  ::-moz-placeholder,
  ::-webkit-input-placeholder {
    color: $c-error;
  }
}

@at-root .ember-power-select-options {
  list-style: none;
  padding   : rs(1) 0;
}

@at-root .ember-power-select-option {
  @include transition-all;
  @include text-truncate;
  cursor     : pointer;
  line-height: rs(6);
  padding    : 0 rs(1.75);

  // Hover State
  &[aria-current="true"] {
    background: rgba($c-accent,0.05);
  }

  // Currently Selected State
  &[aria-selected="true"] {
    background: rgba($c-accent,0.2);
  }
}
